# Company CLI Tool

## Установка:
```
cd path/to/clone
python3 -m venv venv/
. venv/bin/activate
pip install .
```
    
## Использование:
Загрузка `json`-файла в базу
```
com-cli-tool import path/to/file.json
```
Считывает `json` файл, и загружает данные в таблицу. 
В опциях можно передавать опции для установки соединения с базой. Подробнее: `com-cli-tool import --help` 

---
Поиск всех людей в текущем офисе по id работника 
```
com-cli-tool office person_id
```
Делая запросы в базу, скрипт идет по полям `ParentId`, пока не дойдет до самого верха иерархии, которая представляет офис.
Затем, из верха иереархии спускаемся вниз по детям каждого элемента, пока не дойдем до элемента без детей.
  
В опциях можно передавать опции для установки соединения с базой. Подробнее: `com-cli-tool import --help`

## Улучшения структуры:
На данный момент из-за строения таблицы приходится делать много запросов вида `SELECT`.
Чтобы этого избежать, можно, например, при добавлении строк в базу сразу рассчитывать id офиса этого департамента или человека.
Если в строке `ParentId = NULL`, то `OfficeId = Id`. Иначе, `OfficeId = OfficeId родителя`. Это поможет избежать лишних запросов.

Также, множественные запросы можно планировать изначально, экономля время на планировании во время выполнения.   